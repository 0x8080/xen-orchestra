  <!-- TODO: lots of stuff. -->
<div class="grid">
  <div class="grid-cell flat-panel">
    <p class="page-title"><i class="xo-icon-vm xo-color-{{VM.power_state | lowercase}}"></i> {{VM.name_label}}</p>
  </div>
</div>
<div class="grid">
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="fa fa-cogs" style="color: #e25440;"></i> General</p>
    <div class="general-properties">
      <dl class="dl-horizontal">
        <dt>Name</dt>
          <dd><a editable-text="VM.name_label">{{VM.name_label}}</a></dd>
        <dt>Description</dt>
          <dd><a editable-text="VM.name_description">{{VM.name_description}}</a></dd>
        <dt ng-if="VM.power_state == ('Running' || 'Paused')">Running on:</dt>
          <dd><a xo-sref="hosts_view({uuid: VM.$container})">{{(VM.$container | fromUUID).name_label}}</a></dd>
        <dt>Address</dt>
          <dd ng-repeat="IP in VM.address.ip">{{IP}}</dd>
        <dt>Tags</dt>
          <dd>
            <input type="text" ui-select2="select2Options" ng-model="VM.tags">
          </dd>
        <dt>vCPUs</dt>
          <dd>{{VM.CPUs.number}}</dd>
        <dt>RAM</dt>
          <dd><a editable-text="VM.memory.size">{{VM.memory.size | bytes}}</a></dd>
        <dt>UUID</dt>
          <dd>{{VM.UUID}}</dd>
      </dl>
    </div>
  </div>
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="fa fa-bar-chart-o" style="color: #e25440;"></i> Stats</p>
    <div class="grid">
      <div class="grid-cell">
        <p class="stat-name">vCPUs</p>
        <p class="center big">{{VM.CPUs.number}}</p>
      </div>
      <div class="grid-cell">
        <p class="stat-name">RAM</p>
        <p class="center big">{{VM.memory.size | bytes}}</p>
      </div>
      <div class="grid-cell">
        <p class="stat-name">Disks</p>
        <p class="center big">{{VM.$VBDs.length || 0}}</p>
      </div>
    </div>
  </div>
</div>

<!-- Action panel -->
<div class="grid">
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="fa fa-flash" style="color: #e25440;"></i> Actions</p>
    <div class="grid">
      <div class="grid-cell text-center grid-button" tooltip="Stop VM" xo-click="stopVM(VM.UUID)">
        <i class="fa fa-stop fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Start VM" xo-click="startVM(VM.UUID)">
        <i class="fa fa-play fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Reboot VM" xo-click="rebootVM(VM.UUID)">
        <i class="fa fa-refresh fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Migrate VM">
        <i class="fa fa-mail-forward fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Force Reboot" xo-click="force_rebootVM(UUID)">
        <i class="fa fa-flash fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Force Shutdown" xo-click="force_stopVM(UUID)">
        <i class="fa fa-power-off fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Delete VM" xo-click="destroyVM(UUID)">
        <i class="fa fa-trash-o fa-2x fa-fw"></i>
      </div>
      <div class="grid-cell text-center grid-button" tooltip="Create a snapshot">
        <i class="xo-icon-snapshot fa-2x fa-fw"></i>
      </div>
      <div
        class="grid-cell text-center grid-button"
        tooltip="VM Console"
        xo-sref="consoles_view({uuid: VM.UUID})"
      >
        <i class="xo-icon-console fa-2x fa-fw"></i>
      </div>
    </div>
  </div>
</div>

<!-- TODO: Disk panel -->
<div class="grid">
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="xo-icon-sr" style="color: #e25440;"></i> Disk</p>
    <table class="table table-hover">
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Size</th>
        <th>SR</th>
        <th>Status</th>
      </tr>
      <tr xo-sref="SRs_view({uuid: VDI.SR})" ng-repeat="VDI in VDIs | fromUUID | orderBy:'name_label'">
        <td>{{VDI.name_label}}</td>
        <td>{{VDI.name_description}}</td>
        <td>{{VDI.size | bytes}}</td>
        <td>{{(VDI.SR | fromUUID).name_label}}</td>
        <td ng-if="(VDI.$VBD | fromUUID).attached">
          <span class="label label-success">Connected</span>
          <a class="quick-remove" tooltip="Disconnect disk">
            <i class="fa fa-ban fa-fw"> </i>
          </a>
          <a class="quick-remove" tooltip="Edit disk">
            <i class="fa fa-edit fa-fw"> </i>
          </a>
        </td>
        <td ng-if="!(VDI.$VBD | fromUUID).attached">
          <span class="label label-default">Disabled</span>
          <a class="quick-remove" tooltip="Destroy disk">
            <i class="fa fa-trash-o fa-fw"> </i>
          </a>
          <a class="quick-remove" tooltip="Edit disk">
            <i class="fa fa-edit fa-fw"> </i>
          </a>
        </td>
      </tr>
      <tr ng-repeat="vdi in newVDIs">
        <td>
          <input type="text" ng-model="VDI.name_label" class="form-control" placeholder="Name"/>
        </td>
        <td>
          <input type="text" ng-model="VDI.name_description" class="form-control" placeholder="Created with Xen Orchestra"/>
        </td>
        <td>
          <input type="text" ng-model="VDI.size" class="form-control" placeholder="8GB"/>
        </td>
        <td>
          <input type="text" ng-model="VDI.SR" class="form-control" placeholder="TODO SELECT SR"/>
        </td>
        <td>&nbsp;</td>
      </tr>
    </table>
    <p class="center">
      <button
        type="submit"
        class="btn btn-primary" ng-click="addVDI()"><i class="fa fa-plus"></i> Add Disk</button>
    </p>
  </div>
</div>

<!-- TODO: Interface panel -->
<div class="grid">
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="xo-icon-network" style="color: #e25440;"></i> Interface</p>
    <table class="table table-hover">
      <th class="col-md-1">Device</th>
      <th class="col-md-2">MAC</th>
      <th class="col-md-1">MTU</th>
      <th class="col-md-1">Link status</th>
      <tr ng-repeat="VIF in VM.$VIFs | fromUUID  | orderBy:'name_label'">
        <td>VIF #{{VIF.device}}</td>
        <td>{{VIF.mac}}</td>
        <td>{{VIF.mtu}}</td>
        <td ng-if="VIF.attached">
          <span class="label label-success">Connected</span>
          <a class="quick-remove" tooltip="Disconnect interface">
            <i class="fa fa-ban fa-fw"> </i>
          </a>
          <a class="quick-remove" tooltip="Edit interface">
            <i class="fa fa-edit fa-fw"> </i>
          </a>
        </td>
        <td ng-if="!VIF.attached">
          <span class="label label-default">Disabled</span>
          <a class="quick-remove" tooltip="Remove interface">
            <i class="fa fa-trash-o fa-fw"> </i>
          </a>
          <a class="quick-remove" tooltip="Edit interface">
            <i class="fa fa-edit fa-fw"> </i>
          </a>
        </td>
      </tr>
    </table>
    <p class="center">
      <button type="submit" class="btn btn-primary"><i class="fa fa-plus"></i> Add Interface</button>
    </p>
  </div>
</div>

<!-- TODO: Snapshot and Logs panels -->
<div class="grid">
  <!-- Snapshots panel -->
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="xo-icon-snapshot" style="color: #e25440;"></i> Snapshot</p>
    <p class="center" ng-if="!VM.snapshots.length">No snapshots</p>
    <table class="table table-hover" ng-if="VM.snapshots">
      <th class="col-md-1">Date</th>
      <th class="col-md-1">Name</th>
      <tr ng-repeat="snapshot in VM.snapshots | fromUUID">
        <td>{{snapshot.snapshot_time}}</td>
        <td>{{snapshot.name_label}}</td>
      </tr>
    </table>
    </div>
  <!-- Logs panel -->
  <div class="grid-cell flat-panel">
    <p class="flat-panel-title"><i class="fa fa-comments" style="color: #e25440;"></i> Logs</p>
    <p class="center" ng-if="!VM.$messages.length">No recent logs</p>
    <table class="table table-hover" ng-if="VM.$messages.length">
      <th class="col-md-1">Date</th>
      <th class="col-md-1">Name</th>
      <tr ng-repeat="message in VM.$messages | fromUUID">
        <td>{{message.time}}</td>
        <td>
          {{message.name}}
          <a class="quick-remove" tooltip="Remove log">
            <i class="fa fa-trash-o fa-fw"> </i>
          </a>
        </td>
      </tr>
    </table>
  </div>

</div>

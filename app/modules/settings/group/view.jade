.grid
  .panel.panel-default
    p.page-title
      i.fa.fa-users(style="color: #e25440;")
      |  {{ ctrl.group.name }}&nbsp;
      a.btn.btn-default(ui-sref = 'settings.groups')
          i.fa.fa-level-up
.grid
  .panel.panel-default
    .panel-heading.panel-title
      i.fa.fa-street-view(style="color: #e25440;")
      |  Members&nbsp;
      span(ng-if = 'ctrl.isModified()') (*)
    .panel-body
      ul.list-group(ng-if = '!ctrl.group.users.length')
        li.list-group-item.disabled: em (empty)
      ul.list-group(ng-if = 'ctrl.group.users.length')
        li.list-group-item(ng-repeat = 'user in ctrl.group.users')
          span(ng-if = '!ctrl.removals[user]') {{ ctrl.userEmails[user] }}&nbsp;
          del(ng-if = 'ctrl.removals[user]') {{ ctrl.userEmails[user] }}&nbsp;
          span.pull-right
            label
              input.hidden(type = 'checkbox', ng-model = 'ctrl.removals[user]')
              | &nbsp;
              i.fa.fa-trash-o(tooltip="Remove user from group", style = 'cursor: pointer')
      p.form-inline
        | Available users to add:&nbsp;
        select.form-control(ng-if = '(ctrl.users | notInGroup:ctrl.group).length', ng-model = 'ctrl.addedUser', ng-change = 'ctrl.addUserToGroup(ctrl.group, ctrl.addedUser)', ng-options = 'addedUser.email for addedUser in ctrl.users | notInGroup:ctrl.group | orderBy:natural("email") track by addedUser.id')
        em.text-muted(ng-if = '!(ctrl.users | notInGroup:ctrl.group).length') empty
        //- button.btn.btn-success.btn-sm(type="button", ng-click="ctrl.addUserToGroup(ctrl.group, ctrl.addedUser)", ng-class = '{disabled: !ctrl.addedUser}')
          i.fa.fa-plus
      button.btn.btn-primary(ng-if = 'ctrl.isModified()', type="button", ng-click = 'ctrl.saveGroup(ctrl.group)')
        i.fa.fa-save
        |  Save
      | &nbsp;
      button.btn.btn-default(ng-if = 'ctrl.isModified()', type="button", ng-click = 'ctrl.cancelEdition()')
        i.fa.fa-times
        |  Cancel
.grid
  .panel.panel-default
    .panel-heading.panel-title
      i.fa.fa-key(style="color: #e25440;")
      |  ACLs&nbsp;
    .panel-body
      table.table.table-hover
        tr
          th Object
          th Role
        tr(ng-repeat = 'acl in ctrl.acls | filter:ctrl.matchesGroup track by acl.id')
          td {{(acl.object | resolve).name_label}}
          td {{ ctrl.rolesById[acl.action].name }}
  .panel.panel-default
    .panel-heading.panel-title
      i.fa.fa-eye(style="color: #e25440;")
      |  Accessible objects&nbsp;
    .panel-body
      p(ng-repeat = 'object in ctrl.objects | selectHighLevel | canAccess:ctrl.group:ctrl.acls | orderBy:["type", "name_label"]')
        i(class = 'xo-icon-{{object.type | lowercase}}')
        |  {{object.name_label}}
        span(ng-if="(object.type === 'SR' || object.type === 'VM') && object.$container")
          |  ({{(object.$container | resolve).name_label}})


.grid
  .panel.panel-default
    p.page-title
      i.fa.fa-users(style="color: #e25440;")
      |  Groups
.grid
  .panel.panel-default
    form(ng-submit="ctrl.saveGroups()", autocomplete="off").panel-body
      table.table.table-hover
        tr
          th.col-md-5 Name
          th.col-md-5 Manage
          th.col-md-2.text-center
            i.fa.fa-trash-o.fa-lg(tooltip="Remove group")
        tr(ng-repeat="group in ctrl.groups | orderBy:natural('id') track by group.id")
          td
            input.form-control(type="text", ng-model="group.name", ui-event = '{focus: "ctrl.editingGroup(true)", blur: "ctrl.editingGroup(false)"}')
          td
            .row
              .col-md-3
                a.btn.btn-primary(ui-sref = 'settings.group({groupId: group.id})')
                  i.fa.fa-pencil
              .col-md-9
                span(ng-if = '!group.users.length'): em (empty)
                span(ng-if = 'group.users.length', ng-repeat = 'user in group.users | limitTo:4') {{ ctrl.userEmails[user] }} {{ $last ? (group.users.length > 4 ? ',...' : '') : ', ' }}
          td.text-center
            input(type="checkbox", ng-model="ctrl.selectedGroups[group.id]")
        tr(ng-repeat="group in ctrl.newGroups")
          td
            input.form-control(
              type = "text"
              ng-model = "group.name"
              placeholder = "name"
            )
          td &#160;
          td &#160;
      p.text-center
        button.btn.btn-primary(type="submit")
          i.fa.fa-save
          |  Save
        | &nbsp;
        button.btn.btn-success(type="button", ng-click="ctrl.addGroup()")
          i.fa.fa-plus

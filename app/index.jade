//- HTML 5 Doctype
doctype html

//- The “no-js” class will be automatically removed if JavaScript is
//- available.
html.no-js(lang="en", dir="ltr")
  head
    meta(charset="utf-8")
    //- This file is a part of Xen Orchestra Web.
    //-
    //- Xen Orchestra Web is free software: you can redistribute it and/or
    //- modify it under the terms of the GNU Affero General Public License
    //- as published by the Free Software Foundation, either version 3 of
    //- the License, or (at your option) any later version.
    //-
    //- Xen Orchestra Web is distributed in the hope that it will be
    //- useful, but WITHOUT ANY WARRANTY; without even the implied warranty
    //- of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
    //- Affero General Public License for more details.
    //-
    //- You should have received a copy of the GNU Affero General Public License
    //- along with Xen Orchestra Web. If not, see
    //- <http://www.gnu.org/licenses/>.
    //-
    //- @author Olivier Lambert <olivier.lambert@vates.fr>
    //- @license http://www.gnu.org/licenses/agpl-3.0-standalone.html GNU AGPLv3
    //-
    //- @package Xen Orchestra Web

    //- Makes sure IE is using the last engine available.
    meta(http-equiv="X-UA-Compatible", content="IE=edge,chrome=1")

    //- Replaces the “no-js” class by the “js” class if JavaScript is
    //- available.
    script.
      !function(d){d.className=d.className.replace(/\\bno-js\b/,'js')}(document.documentElement)

    //- (To confirm.) For smartphones and tablets: sets the page
    //- width to the device width and prevents the page from being
    //- zoomed in when going to landscape mode.
    meta(name="viewport", content="width=device-width, initial-scale=1.0")

    title Xen Orchestra
    meta(name="description", content="Web interface for XenServer/XAPI Hosts")
    meta(name="author", content="Vates SAS")

    //- Place favicon.ico and apple-touch-icon.png in the root directory
    // build:css(.tmp) styles/main.css
    link(rel="stylesheet", href="styles/main.css")
    // endbuild

    //- Angular-xeditable CSS
    link(rel="stylesheet", href="bower_components/angular-xeditable/dist/css/xeditable.css")

    //- Angular UI Select
    link(rel="stylesheet", href="bower_components/select2/select2.css")

    link(rel="stylesheet", href="bower_components/angular-notify-toaster/toaster.css")
  body(ng-app="xoWebApp")

    //if lt IE 7
      p.browsehappy
        | You are using an
        strong outdated
        | browser. Please
        a(href="http://browsehappy.com/") upgrade your browser
        | to improve your experience.

    //if lt IE 9
      script(src="bower_components/es5-shim/es5-shim.js")
      script(src="bower_components/json3/lib/json3.min.js")

    toaster-container

    //- Navigation bar.
    div(ng-controller="NavBarCtrl")
      ng-include(src="'views/nav-bar.html'")

    //- Main content (managed by the router).
    .view-main(ui-view="")

    script(src="bower_components/jquery/dist/jquery.js")
    script(src="bower_components/angular/angular.js")
    script(src="bower_components/angular-animate/angular-animate.js")
    script(src="bower_components/angular-cookies/angular-cookies.js")

    // build:js scripts/plugins.js
    script(src="bower_components/angular-ui-bootstrap-bower/ui-bootstrap-tpls.js")
    script(src="bower_components/angular-ui-router/release/angular-ui-router.js")
    script(src="bower_components/angular-ui-utils/ui-utils.js")
    script(src="bower_components/angular-notify-toaster/toaster.js")
    // endbuild

    // build:js scripts/modules.js
    script(src="bower_components/angular-xeditable/dist/js/xeditable.js")
    script(src="bower_components/select2/select2.js")
    script(src="bower_components/angular-ui-select2/src/select2.js")
    script(src="bower_components/angularjs-naturalsort/index.js")
    // endbuild

    // noVNC
    script(src="bower_components/noVNC/include/util.js")
    script.
      var INCLUDE_URI = 'bower_components/noVNC/include/';
      Util.load_scripts([
      'webutil.js',
      'base64.js',
      'websock.js',
      'des.js',
      'keysymdef.js',
      'keyboard.js',
      'input.js',
      'display.js',
      'jsunzip.js',
      'rfb.js',
      ]);

    // build:js({.tmp,app}) scripts/scripts.js
    script(src="scripts/app.js")
    script(src="scripts/directives.js")
    script(src="scripts/filters.js")
    script(src="scripts/services.js")
    script(src="scripts/controllers/login.js")
    script(src="scripts/controllers/main.js")
    script(src="scripts/controllers/nav-bar.js")
    script(src="scripts/controllers/list.js")
    script(src="scripts/controllers/host.js")
    script(src="scripts/controllers/sr.js")
    script(src="scripts/controllers/pool.js")
    script(src="scripts/controllers/vm.js")
    script(src="scripts/controllers/console.js")
    script(src="scripts/controllers/settings.js")
    script(src="scripts/controllers/new_vm.js")
    script(src="scripts/controllers/new_sr.js")
    script(src="scripts/controllers/delete_vms.js")
    script(src="scripts/controllers/generic_modal.js")
    // endbuild

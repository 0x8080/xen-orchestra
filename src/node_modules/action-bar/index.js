import _ from 'messages'
import map from 'lodash/map'
import React from 'react'
import Icon from 'icon'

const ActionBar = ({ actions, display = 'both' }) => (
  <div className='btn-group'>
    {map(actions, (actionProps) => (
      <ActionButton {...actionProps} display={display} key={actionProps.label} />
    ))}
  </div>
)
ActionBar.propTypes = {
  actions: React.PropTypes.arrayOf(
    React.PropTypes.shape({
      label: React.PropTypes.string,
      icon: React.PropTypes.string,
      handler: React.PropTypes.func.isRequired
    })
  ).isRequired,
  display: React.PropTypes.oneOf(['icon', 'text', 'both'])
}
export default ActionBar

const ActionButton = ({label, icon, handler, display}) => (
  <button type='button' className='btn btn-default btn-secondary' onClick={handler}>
    {icon && (display === 'icon' || display === 'both') ? <Icon icon={icon} /> : []}
    {label && (display === 'text' || display === 'both') ? <span> {_(label)}</span> : []}
  </button>
)
